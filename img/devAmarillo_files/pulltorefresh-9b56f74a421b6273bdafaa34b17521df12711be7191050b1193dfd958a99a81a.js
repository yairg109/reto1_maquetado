"use strict";((e,t)=>{const n=this;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof window.define&&window.define.amd?window.define(t):n.PullToRefresh=t()})(0,()=>{function e(){return'\n<div class="__PREFIX__box">\n  <div class="__PREFIX__content">\n    <div class="__PREFIX__icon"></div>\n    <div class="__PREFIX__text"></div>\n  </div>\n</div>'}function t(){return".__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n.__PREFIX__pull {\n  transition: none;\n}\n.__PREFIX__text {\n  margin-top: 0.33em;\n opacity: 0.7; }\n.__PREFIX__icon {\n transition: transform 0.3s;\n opacity: 0.7;}\n.__PREFIX__top {\n  touch-action: pan-x pan-down pinch-zoom;\n}\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}\n"}function n(){function e(e){var t=o.handlers.filter(t=>t.contains(e.target))[0];o.enable=!!t,t&&"pending"===o.state&&(r=l.setupDOM(t),t.shouldPullToRefresh()&&(o.pullStartY=e.touches[0].screenY),clearTimeout(o.timeout),l.update(t))}function t(e){r&&r.ptrElement&&o.enable&&(o.pullStartY?o.pullMoveY=e.touches[0].screenY:r.shouldPullToRefresh()&&(o.pullStartY=e.touches[0].screenY),"refreshing"!==o.state?("pending"===o.state&&(r.ptrElement.classList.add(r.classPrefix+"pull"),o.state="pulling",l.update(r)),o.pullStartY&&o.pullMoveY&&(o.dist=o.pullMoveY-o.pullStartY),o.distExtra=o.dist-r.distIgnore,o.distExtra>0&&(e.preventDefault(),r.ptrElement.style[r.cssProp]=o.distResisted+"px",o.distResisted=r.resistanceFunction(o.distExtra/r.distThreshold)*Math.min(r.distMax,o.distExtra),"pulling"===o.state&&o.distResisted>r.distThreshold&&(r.ptrElement.classList.add(r.classPrefix+"release"),o.state="releasing",l.update(r)),"releasing"===o.state&&o.distResisted<r.distThreshold&&(r.ptrElement.classList.remove(r.classPrefix+"release"),o.state="pulling",l.update(r)))):r.shouldPullToRefresh()&&o.pullStartY<o.pullMoveY&&e.preventDefault())}function n(){if(r&&r.ptrElement&&o.enable){if("releasing"===o.state&&o.distResisted>r.distThreshold)o.state="refreshing",r.ptrElement.style[r.cssProp]=r.distReload+"px",r.ptrElement.classList.add(r.classPrefix+"refresh"),o.timeout=setTimeout(()=>{var e=r.onRefresh(()=>l.onReset(r));e&&"function"==typeof e.then&&e.then(()=>l.onReset(r)),e||r.onRefresh.length||l.onReset(r)},r.refreshTimeout);else{if("refreshing"===o.state)return;r.ptrElement.style[r.cssProp]="0px",o.state="pending"}l.update(r),r.ptrElement.classList.remove(r.classPrefix+"release"),r.ptrElement.classList.remove(r.classPrefix+"pull"),o.pullStartY=null,o.pullMoveY=null,o.dist=0,o.distResisted=0}}function s(){r&&r.mainElement.classList.toggle(r.classPrefix+"top",r.shouldPullToRefresh())}var r,i=o.supportsPassive?{passive:o.passive||!1}:undefined;return window.addEventListener("touchend",n),window.addEventListener("touchstart",e),window.addEventListener("touchmove",t,i),window.addEventListener("scroll",s),{onTouchEnd:n,onTouchStart:e,onTouchMove:t,onScroll:s,destroy:function(){window.removeEventListener("touchstart",e),window.removeEventListener("touchend",n),window.removeEventListener("touchmove",t,i),window.removeEventListener("scroll",s)}}}function s(e){var t={};return Object.keys(r).forEach(n=>{t[n]=e[n]||r[n]}),t.refreshTimeout="number"==typeof e.refreshTimeout?e.refreshTimeout:r.refreshTimeout,i.forEach(e=>{"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),o.events||(o.events=n()),t.contains=(e=>t.triggerElement.contains(e)),t.destroy=(()=>{clearTimeout(o.timeout),o.handlers.splice(t.offset,1)}),t}var r={distThreshold:60,distMax:80,distReload:50,distIgnore:10,bodyOffset:20,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"Pull down to refresh",instructionsReleaseToRefresh:"Release to refresh",instructionsRefreshing:"Refreshing",refreshTimeout:350,getMarkup:e,getStyles:t,onInit:()=>{},onRefresh:()=>window.location.reload(),resistanceFunction:e=>Math.min(1,e/2.5),shouldPullToRefresh:()=>!window.scrollY&&(document.getElementById("articles-list")||document.getElementById("main-content")||document.getElementById("user-dashboard")||document.getElementById("article-body")||document.getElementById("listings-index-container"))&&!document.body.classList.contains("modal-open")&&"open"!==document.body.dataset.leftNavState&&!document.getElementById("article-form")},i=["mainElement","ptrElement","triggerElement"],o={pullStartY:null,pullMoveY:null,handlers:[],styleEl:null,events:null,dist:0,state:"pending",timeout:null,distResisted:0,supportsPassive:!1};try{window.addEventListener("test",null,{get passive(){o.supportsPassive=!0}})}catch(a){}var l={setupDOM:function(e){const t=e;if(!t.ptrElement){var n=document.createElement("div");t.mainElement!==document.body?t.mainElement.parentNode.insertBefore(n,t.mainElement):document.body.insertBefore(n,document.body.firstChild),n.classList.add(t.classPrefix+"ptr"),n.innerHTML=t.getMarkup().replace(/__PREFIX__/g,t.classPrefix),t.ptrElement=n,"function"==typeof t.onInit&&t.onInit(t),o.styleEl||(o.styleEl=document.createElement("style"),o.styleEl.setAttribute("id","pull-to-refresh-js-style"),document.head.appendChild(o.styleEl)),o.styleEl.textContent=t.getStyles().replace(/__PREFIX__/g,t.classPrefix).replace(/\s+/g," ")}return t},onReset:function(e){const t=e;t.ptrElement.classList.remove(t.classPrefix+"refresh"),t.ptrElement.style[t.cssProp]="0px",setTimeout(()=>{t.ptrElement&&t.ptrElement.parentNode&&(t.ptrElement.parentNode.removeChild(t.ptrElement),t.ptrElement=null),o.state="pending"},t.refreshTimeout)},update:function(e){var t=e.ptrElement.querySelector("."+e.classPrefix+"icon"),n=e.ptrElement.querySelector("."+e.classPrefix+"text");t&&("refreshing"===o.state?t.innerHTML=e.iconRefreshing:t.innerHTML=e.iconArrow),n&&("releasing"===o.state&&(n.innerHTML=e.instructionsReleaseToRefresh,window.sendHapticMessage("medium")),"pulling"!==o.state&&"pending"!==o.state||(n.innerHTML=e.instructionsPullToRefresh),"refreshing"===o.state&&(n.innerHTML=e.instructionsRefreshing))}};return{setPassiveMode:function(e){o.passive=e},destroyAll:function(){o.events&&(o.events.destroy(),o.events=null),o.handlers.forEach(e=>{e.destroy()})},init:function(e){var t=s(void 0===e?{}:e);return t.offset=o.handlers.push(t)-1,t},_:{setupHandler:s,setupEvents:n,setupDOM:l.setupDOM,onReset:l.onReset,update:l.update}}});
//# sourceMappingURL=/assets/lib/pulltorefresh-7602fae9e89723c2749201e113cb0296bf3fe9de857a627ce9e803d370def371.js.map
