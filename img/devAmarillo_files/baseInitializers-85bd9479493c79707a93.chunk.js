(window.webpackJsonp=window.webpackJsonp||[]).push([[41,66,67,69,70,71,72,181],{206:function(t,e,n){"use strict";function i(t,e,n){if(!t)return"";try{var i=new Date(t),o=new Intl.DateTimeFormat(e||"default",n).format(i);return"2-digit"===n.year?o.replace(", "," '"):o}catch(r){return""}}function o(t,e){for(var n=0;n<t.length;n+=1){var i=t[n],o=i.getAttribute(e||"datetime");if(o){var r=a(o);i.setAttribute("title",r)}}}function r(t,e){for(var n=0;n<t.length;n+=1){var o=t[n],r=o.getAttribute("datetime");if(r){var a=i(r,navigator.language,e);o.textContent=a}}}function a(t){return i(t,navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),"undefined"!==typeof globalThis&&(globalThis.timestampToLocalDateTimeLong=a,globalThis.timestampToLocalDateTimeShort=function(t){if(t){var e=(new Date).getFullYear(),n={day:"numeric",month:"short"};return new Date(t).getFullYear()!==e&&(n.year="numeric"),i(t,navigator.language,n)}return""})},221:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r}));var i="user-alert-modal";function o(t,e,n){!function(t,e){var n=document.getElementById(i);n?n.outerHTML=a(t,e).outerHTML:(n=a(t,e),document.body.appendChild(n))}(e,n),window.Forem.showModal({title:t,contentSelector:"#".concat(i),overlay:!0})}function r(t){var e=t.response,n=t.element,i=t.action_ing,r=t.action_past,a=t.timeframe,c=void 0===a?"a moment":a;e.json().then((function(t){429===e.status?function(t){var e=t.element,n=t.action_ing,i=t.action_past,r=t.timeframe,a=void 0===r?"a moment":r,c=function(t){var e=t.element,n=t.action_ing,i=t.action_past,o=t.timeframe;return"Since you recently ".concat(i," a ").concat(e,", you\u2019ll need to wait ").concat(o," before ").concat(n," another ").concat(e,".")}({element:e,action_ing:n,action_past:i,timeframe:a});o("Wait ".concat(a,"..."),c,"Got it")}({element:n,action_ing:i,action_past:r,timeframe:c}):o("Error ".concat(i," ").concat(n),"Your ".concat(n," could not be ").concat(r," due to an error: ").concat(t.error),"OK")})).catch((function(){o("Error ".concat(i," ").concat(n),"Your ".concat(n," could not be ").concat(r," due to a server error"),"OK")}))}function a(t,e){var n=document.createElement("div");return n.innerHTML=function(t,e){return'\n   <div id="'.concat(i,'" hidden>\n     <div class="flex flex-col">\n       <p class="color-base-70">\n         ').concat(t,'\n       </p>\n       <button class="crayons-btn mt-4 ml-auto" type="button" onClick="window.Forem.closeModal()">\n         ').concat(e,"\n       </button>\n     </div>\n   </div>\n ")}(t,e),n}},409:function(t,e,n){"use strict";function i(t,e,n,i,o,r,a){try{var c=t[r](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(i,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function c(t){i(a,o,r,c,s,"next",t)}function s(t){i(a,o,r,c,s,"throw",t)}c(void 0)}))}}function r(t,e,n){var i="",o="";"undefined"==typeof n&&(n=window.innerWidth);var r="comments",a=t.dataset,c=a.subscription_id,s=a.subscription_config,u=a.comment_id,d=""!=c;"undefined"!=typeof e&&(d="subscribe"==e);var l=d,m=d?"Subscribed":"Subscribe";u&&""!=u&&(r="thread");var f=t.querySelector("span");switch(s){case"top_level_comments":i="".concat(m," to top-level comments"),o="Top-level ".concat(r);break;case"only_author_comments":i="".concat(m," to author comments"),o="Author ".concat(r);break;default:i="".concat(m," to ").concat(r),o="".concat(r).charAt(0).toUpperCase()+r.slice(1)}t.setAttribute("aria-label",i),f.innerText=n<=760?o:i,t.setAttribute("aria-pressed",l)}function a(t,e){"undefined"==typeof e&&(e=t.dataset.subscription_id?"unsubscribe":"subscribe"),"unsubscribe"==e?(t.classList.remove("comment-subscribed"),r(t,"unsubscribe")):(t.classList.add("comment-subscribed"),r(t,"subscribe"))}function c(t){var e,n;return""!=t.dataset.subscription_id?(e={subscription_id:t.dataset.subscription_id},n="comment-unsubscribe"):t.dataset.subscribed_to&&"comment"==t.dataset.subscribed_to?(e={comment_id:t.dataset.comment_id},n="comment-subscribe"):(e={article_id:t.dataset.article_id,subscription_config:t.dataset.subscription_config},n="comment-subscribe"),{payload:e,endpoint:n}}function s(t){return u.apply(this,arguments)}function u(){return u=o((function*(t){var e=t.target;a(e);var n=c(e),i=n.payload,r=n.endpoint,s=JSON.stringify(i);getCsrfToken().then(yield sendFetch(r,s)).then(function(){var t=o((function*(t){if(200===t.status){var n=yield t.json();if(n.destroyed)for(var i=document.querySelectorAll("button[data-subscription_id='".concat(e.dataset.subscription_id,"']")),o=0;o<i.length;o++){var r=i[o];r.dataset.subscription_id="",r!=e&&a(r,"unsubscribe")}else{if(!n.subscription)throw"Problem (un)subscribing: ".concat(JSON.stringify(n));e.dataset.subscription_id=n.subscription.id}}}));return function(e){return t.apply(this,arguments)}}())})),u.apply(this,arguments)}function d(){var t=document.querySelectorAll(".subscribe-button");0!==t.length&&Array.from(t,(function(t){t.wasInitialized||(t.removeEventListener("click",s),t.addEventListener("click",s),t.wasInitialized=!0,r(t))}))}n.r(e),n.d(e,"updateSubscribeButtonText",(function(){return r})),n.d(e,"optimisticallyUpdateButtonUI",(function(){return a})),n.d(e,"determinePayloadAndEndpoint",(function(){return c})),n.d(e,"initializeSubscribeButton",(function(){return d})),d()},436:function(t,e,n){"use strict";n.r(e),n.d(e,"initializeCommentDate",(function(){return o}));var i=n(206);function o(){var t=document.querySelectorAll(".comment-date time");t&&Object(i.a)(t,"datetime")}},437:function(t,e,n){"use strict";function i(t,e){var n=JSON.stringify({comment:{body_markdown:e.value}});getCsrfToken().then(sendFetch("comment-preview",n)).then((function(t){return t.json()})).then((function(e){var n;t.innerHTML=e.processed_html,e.processed_html.includes("twitter-timeline")&&((n=document.createElement("script")).src="https://platform.twitter.com/widgets.js",n.async=!0,document.body.appendChild(n)),activateRunkitTags()})).catch((function(t){console.log("error!"),console.log(t)}))}function o(t){t.preventDefault();var e=t.target.form,n=e.getElementsByClassName("comment-textarea")[0],o=e.getElementsByClassName("comment-form__preview")[0],r=e.getElementsByClassName("preview-toggle")[0];if(""!==n.value)if(e.classList.contains("preview-open"))e.classList.toggle("preview-open"),r.innerHTML="Preview";else{i(o,n);var a=n.offsetHeight+43;o.style.minHeight="".concat(a,"px"),r.innerHTML="Continue editing",e.classList.toggle("preview-open")}}function r(){var t=document.getElementsByClassName("preview-toggle")[0];t&&t.addEventListener("click",o)}n.r(e),n.d(e,"initializeCommentPreview",(function(){return r}))},440:function(t,e,n){"use strict";function i(){var t=document.getElementById("settings-org-secret");if(null!==t){var e=t.value;return window.Forem.Runtime.copyToClipboard(e).then((function(){document.getElementById("copy-text-announcer").classList.remove("hidden")}))}}n.r(e),n.d(e,"initializeSettings",(function(){return a}));var o=n(206);function r(t){var e=t.target.value;InstantClick.preload(e),InstantClick.display(e)}function a(){var t;null===(t=document.getElementById("settings-org-secret-copy-btn"))||void 0===t||t.addEventListener("click",i),function(){var t=document.getElementById("rss-fetch-time");if(t){var e=t.getAttribute("datetime");t.textContent=Object(o.c)(e,navigator.language,{month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}}(),function(){var t;null===(t=document.getElementById("mobile-page-selector"))||void 0===t||t.addEventListener("change",r)}()}},441:function(t,e,n){"use strict";function i(t){try{window&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.haptic&&window.webkit.messageHandlers.haptic.postMessage(t)}catch(e){console.log(e.message)}}n.r(e),n.d(e,"initializeNotifications",(function(){return u}));var o=n(221),r=n(409);function a(){var t;null==document.getElementById("notifications-container")&&((t=document.body)&&"logged-in"===t.getAttribute("data-user-status"))&&instantClick&&(InstantClick.removeExpiredKeys("force"),setTimeout((function(){InstantClick.preload(document.getElementById("notifications-link").href,"force")}),30))}function c(){setTimeout((function(){if(document.getElementById("notifications-container")){for(var t=document.getElementsByClassName("reaction-button"),e=0;e<t.length;e++){var n=t[e];n.setAttribute("aria-pressed",n.classList.contains("reacted")),n.onclick=function(t){t.preventDefault(),i("medium");var e=this;function n(t){"create"===t.result?(e.classList.add("reacted"),e.setAttribute("aria-pressed",!0)):(e.classList.remove("reacted"),e.setAttribute("aria-pressed",!1))}e.classList.add("reacted");var r=new FormData;r.append("reactable_type",e.dataset.reactableType),r.append("category",e.dataset.category),r.append("reactable_id",e.dataset.reactableId),getCsrfToken().then(sendFetch("reaction-creation",r)).then((function(t){200===t.status?t.json().then(n):Object(o.a)({response:t,element:"reaction",action_ing:"updating",action_past:"updated"})}))}}t=document.getElementsByClassName("toggle-reply-form");for(var r=0;r<t.length;r++){t[r].onclick=function(t){t.preventDefault();var e=this;document.getElementById("comment-form-for-".concat(e.dataset.reactableId)).classList.remove("hidden"),e.classList.add("hidden"),e.classList.remove("inline-flex"),setTimeout((function(){document.getElementById("comment-textarea-for-".concat(e.dataset.reactableId)).focus()}),30)}}}}),180)}function s(){var t=document.getElementsByClassName("notifications-paginator");if(t&&t.length>0){var e=t[t.length-1];e&&window.fetch(e.dataset.paginationPath,{method:"GET",credentials:"same-origin"}).then((function(t){200===t.status&&t.text().then((function(t){var n=t.trim();if(n){var i=document.getElementById("articles-list"),o=document.createElement("div");o.innerHTML=n,e.remove(),i.append(o),c()}else{var a=document.getElementById("load-more-button");a&&(a.style.display="none"),e.remove()}Object(r.initializeSubscribeButton)()}))}))}}function u(){var t,e,n;a(),setTimeout((function(){document.getElementById("notifications-container")&&getCsrfToken().then((function(t){var e=window.location.pathname.split("/"),n=parseInt(e[e.length-1].replace(/[^0-9]/g,""),10),i={method:"POST",headers:{"X-CSRF-Token":t}};Number.isInteger(n)?fetch("/notifications/reads?org_id=".concat(n),i):fetch("/notifications/reads",i)}))}),450),c(),(t=document.getElementById("notifications-link"))&&setTimeout((function(){t.onclick=function(){document.getElementById("notifications-number").classList.add("hidden")}}),180),(e=document.getElementById("notifications-filter__select"))&&e.addEventListener("change",(function(t){window.location.href=t.target.value})),s(),(n=document.getElementById("load-more-button"))&&n.addEventListener("click",s)}},451:function(t,e,n){"use strict";function i(t,e){return new Intl.DateTimeFormat("en-US",t).format(e)}function o(t){return i({hour:"numeric",minute:"numeric",timeZoneName:"short"},new Date(Number(t)))}function r(t){return i({month:"short",day:"numeric"},new Date(Number(t)))}function a(t){return i({weekday:"long",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},new Date(Number(t)))}function c(t,e,n){for(var i,o=0;o<t.length;o+=1)i=e(n(t[o])),t[o].innerHTML=i}function s(){var t=document.getElementsByClassName("utc-time"),e=document.getElementsByClassName("utc-date"),n=document.getElementsByClassName("utc");n&&(c(t,o,(function(t){return t.dataset.datetime})),c(e,r,(function(t){return t.dataset.datetime})),c(n,a,(function(t){return t.innerHTML})))}n.r(e),n.d(e,"initializeTimeFixer",(function(){return s})),n.d(e,"updateLocalDateTime",(function(){return c})),n.d(e,"convertUtcDate",(function(){return r})),n.d(e,"convertUtcTime",(function(){return o})),n.d(e,"formatDateTime",(function(){return i})),n.d(e,"convertCalEvent",(function(){return a}))},452:function(t,e,n){"use strict";n.r(e),n.d(e,"initializeDateHelpers",(function(){return o}));var i=n(206);function o(){Object(i.b)(document.querySelectorAll("time.date-no-year"),{month:"short",day:"numeric"}),Object(i.b)(document.querySelectorAll("time.date"),{year:"numeric",month:"short",day:"numeric"}),Object(i.b)(document.querySelectorAll("time.date-short-year"),{year:"2-digit",month:"short",day:"numeric"})}},703:function(t,e,n){"use strict";n.r(e);var i=n(436),o=n(437),r=n(451),a=n(441),c=n(452),s=n(440),u=n(221);Object(i.initializeCommentDate)(),Object(o.initializeCommentPreview)(),Object(s.initializeSettings)(),Object(a.initializeNotifications)(),Object(r.initializeTimeFixer)(),Object(c.initializeDateHelpers)(),InstantClick.on("change",(function(){Object(i.initializeCommentDate)(),Object(o.initializeCommentPreview)(),Object(s.initializeSettings)(),Object(a.initializeNotifications)()})),window.showUserAlertModal=u.b,window.showModalAfterError=u.a}},[[703,118]]]);
//# sourceMappingURL=baseInitializers-85bd9479493c79707a93.chunk.js.map