(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{704:function(e,t){function n(){!function(){var e=0,t=!1,n=document.body.dataset.gaTracking;if(n){var c=setInterval((function(){var o,i,r,d,l,u,s;t||(o=window,i=document,r="script",d="//www.google-analytics.com/analytics.js",l="ga",o.GoogleAnalyticsObject=l,o[l]=o[l]||function(){(o[l].q=o[l].q||[]).push(arguments)},o[l].l=1*new Date,u=i.createElement(r),s=i.getElementsByTagName(r)[0],u.async=1,u.src=d,s.parentNode.insertBefore(u,s)),t=!0,e++,window.ga&&ga.create&&(ga("create",n,"auto"),ga("set","anonymizeIp",!0),ga("send","pageview",location.pathname+location.search),clearInterval(c)),e>85&&(clearInterval(c),a())}),25);o()}}(),function(){var e=0,t=!1,n=document.body.dataset.ga4TrackingId;if(n){var c=setInterval((function(){if(!t){var o=document.createElement("script");o.src="//www.googletagmanager.com/gtag/js?id=".concat(n),o.async=!0,document.head.appendChild(o)}if(t=!0,e++,window.google_tag_manager){var i=function(){window.dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(){window.dataLayer.push(arguments)},i("js",new Date),i("config",n,{anonymize_ip:!0}),clearInterval(c)}e>85&&(clearInterval(c),a())}),25);o()}}(),setTimeout((function(){var e=document.getElementById("article-body")||document.getElementById("comment-article-indicator"),t=document.querySelector("meta[name='csrf-token']"),n=/bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(navigator.userAgent);if(window.innerWidth,e&&t&&!n){var a=Math.floor(10*Math.random());if(!c()&&1!=a)return;var o={article_id:e.dataset.articleId,referrer:document.referrer,user_agent:navigator.userAgent},i=t.getAttribute("content");!function(e,t){window.fetch("/page_views",{method:"POST",headers:{"X-CSRF-Token":t,"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"same-origin"})}(o,i);var r=0,d=setInterval((function(){r++;var e=document.getElementById("article-body")||document.getElementById("comment-article-indicator");e&&c()?function(e,t){window.fetch("/page_views/".concat(e),{method:"PATCH",headers:{"X-CSRF-Token":t,"Content-Type":"application/json"},credentials:"same-origin"}).catch((function(e){return console.error(e)}))}(e.dataset.articleId,i):clearInterval(d),r>118&&clearInterval(d)}),15e3)}}),1800)}function a(){var e=document.querySelector("meta[name='csrf-token']");if(e){var t=e.getAttribute("content"),n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o=window.screen.availWidth,c=window.screen.availHeight,i={path:location.pathname+location.search,user_language:navigator.language,referrer:document.referrer,user_agent:navigator.userAgent,viewport_size:"".concat(a,"x").concat(n),screen_resolution:"".concat(c,"x").concat(o),document_title:document.title,document_encoding:document.characterSet,document_path:location.pathname+location.search};window.fetch("/fallback_activity_recorder",{method:"POST",headers:{Accept:"application/json","X-CSRF-Token":t},body:JSON.stringify(i),credentials:"same-origin"})}}function o(){var e=document.getElementById("cta-comment-register-now-link");e&&(e.onclick=function(){ga("send","event","click","register-now-click",null,null)})}function c(){var e=document.body;return!!e&&"logged-in"===e.getAttribute("data-user-status")}window.InstantClick.on("change",(function(){n()})),n()}},[[704,119]]]);
//# sourceMappingURL=baseTracking-6a8c8bac49518efc48cf.chunk.js.map